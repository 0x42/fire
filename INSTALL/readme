1. Подготовка контроллеров MOXA UC-7110.

1) Подключить контроллер к PC кабелем ethernet.
2) Создать текстовый файл '.netrc' в домашней папке - '/home/user':
	> cd /home/user
	> echo > .netrc
	> chmod 600 .netrc

3) Прописать адрес в файле '.netrc'.

Пример файла '.netrc':
machine 192.168.1.127 login root password root
machine 192.168.1.128 login root password root
machine 192.168.1.129 login root password root
------
Файл '.netrc' требуется для автоматического запуска ftp клиента без запроса логина и пароля.


> cd <DISTR>/INSTALL/uc7110
> sh install.sh <IP адрес контроллера>
где в качестве параметра используется действительный адрес контроллера.

Запуск скрипта 'install.sh' выполняется для каждого контроллера в отдельности.

При выполнении скрипт запросит параметры ethernet интерфейсов и тип использования серийных портов контроллера.

После выполнения скрипта 'install.sh' в контроллере:

1) создадутся папки -
	/home/utils
	/home/tabr	# master
	/home/slave	# mslave
	
2) добавится скрипт -
	/home/utils/upramdisk2  # создание RAM диска 

3) произойдут изменения в скриптах -
	/etc/rc
	/etc/rc.local


ВНИМАНИЕ !!!
При завершении процедуры, необходимо выполнить перезагрузку контроллера.

==================================================================================================
2. Установка программ master, mslave и конфигурационных файлов на группу контроллеров.

> cd <DISTR>/INSTALL

Предварительно контроллеры должны быть подготовлены (см. выше) и подключены в общую локальную сеть ethernet.

Перед установкой необходимо заполнить скрипт 'create_nodes_cfg' параметрами узлов сети:

sh mslave.cfg.in $nodesfile 192.168.1.128 1 229 230 1   2   5
                            |             |   |   | |   |   |
                            |             |   |   | |   |   адр конец порт2
                            |             |   |   | |   адр начало порт2
                            |             |   |   | разрешение-1/запрет-0 порт2
                            |             |   |   адр конец порт1
                            |             |   адр начало  порт1
                            |             разрешение-1/запрет-0 порт1
                            адрес IP узла

В качестве параметров для скрипта 'mslave.cfg.in' имеем:
1	- IP адрес узла в сети ethernet.
2	- разрешение-1/запрет-0 для серийного порта 1
3, 4	- диапазон адресов для опроса устройств (порт 1)
5	- разрешение-1/запрет-0 для серийного порта 2
6, 7	- диапазон адресов для опроса устройств (порт 2)

mslave.cfg.in - шаблон для генерации конфигурационных файлов для контроллеров типа slave.
В нем прописаны параметры по умолчанию которые можно редактировать.
Например: установить адрес контроллера типа master.


> sh install.sh

После выполнения скрипта 'install.sh':

1) создадутся конфигурационные файлы для каждого узла -
	mslave_ip_node.cfg
	
2) создастся файл списка адресов узлов -
	nodes

3) по списку nodes всем узлам будут разосланы все необходимые программы и конфигурационные файлы.


ВНИМАНИЕ !!!
При завершении процедуры, необходимо выполнить перезагрузку всех контроллеров.

==================================================================================================
3. Установка программ эмуляторов USO, PR и их конфигурационных файлов на группу контроллеров.

> cd <DISTR>/INSTALL/emuls
> echo > nodes
> echo "192.168.1.127" >> nodes
> echo "192.168.1.128" >> nodes
> sh install.sh


